<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebSocket Image Streaming</title>
</head>
<body>
    <h1>Realtime Detection</h1>
    <img id="stream" src="">
    <!-- 버튼 클릭시 웹소켓 disconnect 함수 추가 필요 -->
    <!-- 해당 함수는 detector\consumers.py\VideoConsumer.disconnect 호출해야 함 -->
    <button id="disconnect"> 종료 </button>
    <script>
        var ws_scheme = window.location.protocol == "https:" ? "wss" : "ws";
        var ws_path = ws_scheme + "://" + window.location.host + "/video/";

        var socket = new WebSocket(ws_path);

        socket.onmessage = function(event) {
            var img = document.getElementById("stream");
            img.src = "data:image/jpeg;base64," + event.data;
        };

        disconnect.addEventListener('click', function() {
        socket.send(JSON.stringify({type: 'stop'}));
    });
    </script>
</body>
</html>